<!-- Version: #237 -->
<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MQuiz Admin</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="admin.css"> 
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://sdk.scdn.co/spotify-player.js"></script>
</head>
<body>
    <div id="app-container">

        <!-- Vises når admin er logget ut -->
        <div id="admin-login-view">
            <h1>Adminpanel</h1>
            <p>Du må være logget inn for å administrere sanger.</p>
            <button id="google-login-btn">Logg inn med Google</button>
        </div>

        <!-- Vises når admin er logget inn -->
        <div id="admin-main-view" class="hidden">
            <h1>Adminpanel for Sanger</h1>
            
            <!-- Seksjon for å legge til/redigere én sang -->
            <details open>
                <summary id="form-summary">Legg til én sang</summary>
                <form id="add-song-form" style="text-align: left;">
                    <label for="spotifyId">Spotify ID eller Lenke:</label>
                    <div class="input-with-button">
                        <input type="text" id="spotifyId" required placeholder="Lim inn ID eller lenke her...">
                        <button type="button" id="test-spotify-btn">Test & Fyll ut</button>
                    </div>
                    <div id="spotify-test-status" class="test-status"></div>
                    <img id="test-cover-art" src="" alt="Test av album cover" class="hidden">

                    <label for="artist">Artist:</label>
                    <input type="text" id="artist" required>
                    <label for="title">Tittel:</label>
                    <input type="text" id="title" required>
                    <label for="album">Album (valgfritt):</label>
                    <input type="text" id="album">
                    <label for="year">Årstall:</label>
                    <input type="number" id="year" required>
                    <label for="albumArtUrl">URL til Album Cover (valgfritt):</label>
                    <input type="text" id="albumArtUrl">
                    <label for="trivia">Trivia (valgfritt):</label>
                    <textarea id="trivia" rows="3"></textarea>
                    <fieldset id="genres-fieldset"><legend>Sjangre</legend><div id="genres-container">Laster sjangre...</div></fieldset>
                    <fieldset id="tags-fieldset"><legend>Tags</legend><div id="tags-container">Laster tags...</div></fieldset>
                    
                    <!-- NYTT: Knapper for lagre/oppdater/avbryt -->
                    <div class="form-buttons">
                        <button type="submit" id="save-song-btn">Lagre Sang</button>
                        <button type="button" id="cancel-edit-btn" class="hidden">Avbryt Redigering</button>
                    </div>

                </form>
                <div id="status-message" style="margin-top: 20px; font-weight: bold;"></div>
            </details>

            <!-- NY SEKSJON: Rediger sanger -->
            <details>
                <summary>Rediger Sanger</summary>
                <div class="edit-song-container">
                    <input type="text" id="search-songs-input" placeholder="Søk etter artist eller tittel...">
                    <div id="song-edit-list">Laster sanger...</div>
                </div>
            </details>

            <!-- Seksjon for Masse-import -->
            <details>
                <summary>Masse-import av sanger (JSON)</summary>
                <div class="bulk-import-container">
                    <label for="bulk-import-input">Lim inn JSON-data her:</label>
                    <textarea id="bulk-import-input" rows="10" placeholder='[...]'></textarea>
                    <button type="button" id="bulk-import-btn" style="margin-top: 10px;">Start Import</button>
                    <label>Import-logg:</label>
                    <div id="bulk-import-log"></div>
                </div>
            </details>

            <button id="logout-btn" style="margin-top: 20px;">Logg ut</button>
            <div style="margin-top: 40px; border-top: 1px solid #444; padding-top: 20px; text-align: center;">
                <a href="index.html" style="color: #b3b3b3; text-decoration: none;">Tilbake til Quizen</a>
            </div>
        </div>
    </div>
    <script src="admin.js"></script>
</body>
</html>
<!-- Version: #237 -->
